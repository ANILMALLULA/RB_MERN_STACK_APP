(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(16),r=n.n(c),o=n(11),a=n(5),i=n(12),l=n(6),u=(n(22),n(13)),d=n.n(u),j=(n(19),"LOGIN_lOADING"),b="LOGIN_SUCCESS",g="LOGIN_FAIL",h="REGISTER_LOADING",p="REGISTER_SUCCESS",m="REGISTER_FAIL",O="ISAUTHENTICATED_STATUS",f="BLOGS_REQUEST_lOADING",x="BLOGS_REQUEST_SUCCESS",y="BLOGS_REQUEST_FAIL",v="BLOG_REQUEST_FAIL",N="BLOG_DELETE_FAIL",A="LOGOUT_SUCCESS",S={login:function(e){return console.log(e),fetch("/user/login",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:"",message:e.statusText}}}))},register:function(e){return console.log(e),fetch("/user/register",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},logout:function(){return fetch("/user/logout").then((function(e){return e.json()})).then((function(e){return e}))},isAuthenticated:function(){return fetch("/user/authenticated").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))}},w=function(){return function(e){e({type:j}),S.isAuthenticated().then((function(t){e({type:O,payload:t})}))}},E=n(0),B=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),u=Object(i.a)(r,2),h=u[0],p=u[1],m=Object(l.c)((function(e){return e.authUser})),O=m.isAuthenticated,f=m.error,x=m.loading,y=Object(l.b)();Object(s.useEffect)((function(){y(w())}),[y]);return O?Object(E.jsx)(a.a,{to:"/"}):x?Object(E.jsx)("div",{style:{textAlign:"center",margin:"auto 0"},children:Object(E.jsx)(d.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):Object(E.jsxs)("div",{className:"login-form-container",children:[Object(E.jsx)("img",{src:"https://image.freepik.com/free-vector/letter-logo-design-template_23987-87.jpg",className:"login-image",alt:"website login"}),Object(E.jsxs)("form",{className:"form-container",onSubmit:function(e){var t;(e.preventDefault(),0!==n.length&&0!==h.length)&&y((t={username:n,password:h},function(e){e({type:j}),S.login(t).then((function(t){var n=t.isAuthenticated;e(n?{type:b,payload:t}:{type:g,payload:t})}))}))},children:[Object(E.jsx)("img",{src:"https://image.freepik.com/free-vector/letter-logo-design-template_23987-87.jpg",className:"login-website-logo-desktop-image",alt:"website logo"}),Object(E.jsx)("div",{className:"input-container",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"input-label",htmlFor:"username",children:"USERNAME"}),Object(E.jsx)("input",{type:"text",id:"username",className:"username-input-field",value:n,onChange:function(e){return c(e.target.value)}})]})}),Object(E.jsx)("div",{className:"input-container",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"input-label",htmlFor:"password",children:"PASSWORD"}),Object(E.jsx)("input",{type:"password",id:"password",className:"password-input-field",value:h,onChange:function(e){return p(e.target.value)}})]})}),Object(E.jsx)("button",{type:"submit",className:"login-button",children:"Login"}),null!==f?Object(E.jsxs)("p",{className:"error-message ",children:["*",f]}):"",Object(E.jsx)(o.b,{to:"/register",style:{fontSize:"12px",marginTop:"12px",textAlign:"center"},children:"If you dont have an account, register here!"})]})]})},C=(n(58),function(){return Object(E.jsxs)("div",{style:{margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"15px"},children:[Object(E.jsx)("h1",{style:{marginBottom:"30px"},children:"This is the Home page of our application"}),Object(E.jsx)("p",{style:{backgroundColor:"grey",padding:"10px",borderRadius:"6px",color:"white   "},children:"Accessible to both Content_writers and Admins"}),Object(E.jsx)("h5",{children:"Application is built based on below technologies:"}),Object(E.jsxs)("ul",{style:{margin:"10px"},children:[Object(E.jsx)("li",{children:"React.Js as front-end UI library"}),Object(E.jsx)("li",{children:"NodeJs and ExpressJs as backend and Web API framework "}),Object(E.jsx)("li",{children:"MongoDb server and Mongoose as ODM library for MongoDB / JWT token mechanism"}),Object(E.jsx)("li",{children:"Redux for state management"}),Object(E.jsx)("li",{children:"React-router-dom and few other packages with react library to acheive the required functionalities"})]})]})}),F=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),u=Object(i.a)(r,2),j=u[0],b=u[1],g=Object(s.useState)("Admin"),O=Object(i.a)(g,2),f=O[0],x=O[1],y=Object(s.useState)(null),v=Object(i.a)(y,2),N=v[0],A=v[1],B=Object(l.b)(),C=Object(l.c)((function(e){return e.authUser})),F=C.isAuthenticated,T=C.error,k=C.loading,_=C.message;Object(s.useEffect)((function(){B(w())}),[B]);return F?Object(E.jsx)(a.a,{to:"/"}):k?Object(E.jsx)("div",{style:{textAlign:"center",margin:"auto 0"},children:Object(E.jsx)(d.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):Object(E.jsxs)("div",{className:"login-form-container",children:[Object(E.jsx)("img",{src:"https://image.freepik.com/free-vector/letter-logo-design-template_23987-87.jpg",className:"login-image",alt:"website login"}),Object(E.jsxs)("form",{className:"form-container",onSubmit:function(e){var t;(e.preventDefault(),""!==n)?""!==j?0!==n.length&&0!==j.length?(B((t={username:n,password:j,role:f},console.log(t),function(e){e({type:h}),S.register(t).then((function(t){var n=t.message;console.log(n),n.msgError?e({type:m,payload:n.msgBody}):e({type:p,payload:"Registration successful!"})}))})),b(""),c("")):A("All the fields are mandatory"):alert("Please enter the password"):alert("Please fill the username field")},style:{backgroundColor:"lightgray"},children:[Object(E.jsx)("img",{src:"https://image.freepik.com/free-vector/letter-logo-design-template_23987-87.jpg",className:"login-website-logo-desktop-image",alt:"website logo"}),Object(E.jsx)("div",{className:"input-container",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"input-label",htmlFor:"username",children:"USERNAME"}),Object(E.jsx)("input",{type:"text",id:"username",className:"username-input-field",value:n,onChange:function(e){return c(e.target.value)}})]})}),Object(E.jsx)("div",{className:"input-container",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"input-label",htmlFor:"password",children:"PASSWORD"}),Object(E.jsx)("input",{type:"password",id:"password",className:"password-input-field",value:j,onChange:function(e){return b(e.target.value)}})]})}),Object(E.jsx)("div",{className:"input-container",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"input-label",htmlFor:"password",children:"Select Role"}),Object(E.jsxs)("select",{type:"password",id:"password",className:"password-input-field",value:f,onChange:function(e){return x(e.target.value)},children:[Object(E.jsx)("option",{value:"admin",children:"Admin"}),Object(E.jsx)("option",{value:"user",children:"Content_Writer"})]})]})}),Object(E.jsx)("button",{type:"submit",className:"login-button",children:"Register Here"}),T||null!==N?Object(E.jsxs)("p",{className:"error-message ",children:["*",T||N]}):"",null!==_?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("p",{style:{backgroundColor:"lightgreen",padding:"10px",marginTop:"10px",fontSize:"14px",fontWeight:"bold"},children:_||""}),Object(E.jsx)(o.b,{to:"/login",children:"Click here and Login"})]}):""]})]})},T=function(){return Object(E.jsxs)("div",{style:{margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"15px"},children:[Object(E.jsx)("h1",{style:{marginBottom:"30px"},children:"This is the Admin page of our application"}),Object(E.jsxs)("p",{style:{backgroundColor:"darkred",padding:"10px",borderRadius:"6px",marginBottom:"20px",color:"white   "},children:["Accessible to ",Object(E.jsx)("strong",{children:"Admins only"})]})]})},k={getBlogs:function(){return fetch("/user/blogs").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},postBlog:function(e){return fetch("/user/blog",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized"},msgError:!0}}))},deleteBlog:function(e){return fetch("/user/delete",{method:"delete",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized"},msgError:!0}}))}},_=(n(59),function(e){var t=Object(l.c)((function(e){return e.authUser.user})).role,n=Object(l.b)(),s=e.blog;return Object(E.jsxs)("li",{className:"list-items",children:[Object(E.jsx)("p",{children:e.blog.blog}),"admin"===t?Object(E.jsxs)("div",{children:[Object(E.jsx)("button",{className:"buttonn",style:{backgroundColor:"red",color:"white"},onClick:function(){n(function(e){return function(t){return k.deleteBlog(e).then((function(){console.log(e),k.getBlogs().then((function(e){console.log(e),t({type:x,payload:e.blogs})}))})).catch((function(e){t({type:N,payload:e})}))}}(s))},children:"Delete"}),Object(E.jsxs)("button",{className:"buttonn",style:{backgroundColor:"Green",color:"white"},children:[" ","Approve"]})]}):null]})}),R=(n(60),function(){var e=Object(s.useState)({blog:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(l.c)((function(e){return e.blogReducer})),o=r.blogs,a=r.loading,u=Object(l.b)();Object(s.useEffect)((function(){u((function(e){e({type:f}),k.getBlogs().then((function(t){console.log(t),e({type:x,payload:t.blogs})})).catch((function(t){e({type:y,payload:t})}))}))}),[u]);var j=function(){c({blog:""})};return a?Object(E.jsx)("div",{style:{textAlign:"center",margin:"auto 0"},children:Object(E.jsx)(d.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):Object(E.jsxs)("div",{className:"main-container",children:[Object(E.jsx)("h4",{children:"List of all BLOGS"}),Object(E.jsx)("ul",{className:"list-container",children:null===o||void 0===o?void 0:o.map((function(e){return Object(E.jsx)(_,{blog:e},e._id)}))}),Object(E.jsx)("br",{}),Object(E.jsxs)("form",{onSubmit:function(e){""!==n.blog&&(e.preventDefault(),u(function(e){return function(t){k.postBlog(e).then((function(e){var n=e.message;console.log(n),n.msgError?t({type:y,payload:n.msgBody}):k.getBlogs().then((function(e){console.log(e),t({type:x,payload:e.blogs})}))}))}}(n)),j())},children:[Object(E.jsx)("label",{htmlFor:"blog",className:"labell",children:"Blog information"}),Object(E.jsx)("input",{type:"text",name:"blog",value:n.blog,onChange:function(e){c({blog:e.target.value})},className:"inputBox",placeholder:"Please Enter the Blog info"}),Object(E.jsx)("button",{className:"buttonn",type:"submit",children:"Add Blog"})]})]})}),U=n(2),I=(n(61),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.authUser.user})).role,n=function(){e((function(e){S.logout().then((function(t){t.success&&e({type:A,payload:t})}))})),a.a};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("nav",{className:"header-container",children:[Object(E.jsxs)("div",{className:"logo-and-title-container",children:[Object(E.jsx)("img",{alt:"wave",className:"logo",src:"https://image.freepik.com/free-vector/letter-logo-design-template_23987-87.jpg"}),Object(E.jsx)("h1",{className:"title",children:"My App"})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)(o.b,{className:"route-link",to:"/",children:"Home"}),Object(E.jsx)(o.b,{className:"route-link",to:"/blogs",children:"Blogs"}),"admin"===t?Object(E.jsx)(o.b,{className:"route-link",to:"/admin",children:"Admin"}):null,Object(E.jsx)("button",{className:"btnn",onClick:function(){return n()},children:"Logout"})]})]}),Object(E.jsx)("hr",{})]})});var L=function(e){var t=Object(l.b)(),n=Object(l.c)((function(e){return e.authUser})).isAuthenticated;return Object(s.useEffect)((function(){t(w())}),[t]),n?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(I,{}),Object(E.jsx)(a.b,Object(U.a)({},e))]}):Object(E.jsx)(a.a,{to:"/login"})};n(62);var D=function(){return Object(E.jsx)(o.a,{children:Object(E.jsx)("div",{className:"app-container",children:Object(E.jsx)("div",{className:"app-card",children:Object(E.jsxs)(a.d,{children:[Object(E.jsx)(a.b,{exact:!0,path:"/login",component:B}),Object(E.jsx)(L,{exact:!0,path:"/",component:C}),Object(E.jsx)(a.b,{exact:!0,path:"/register",component:F}),Object(E.jsx)(L,{exact:!0,path:"/admin",component:T}),Object(E.jsx)(L,{exact:!0,path:"/blogs",component:R})]})})})})},G=(n(63),n(14)),J=n(24),M=n(25),W={loading:!1,blogs:[],blog:{},error:null,message:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case f:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case x:return Object(U.a)(Object(U.a)({},e),{},{blogs:s,loading:!1});case y:case N:return Object(U.a)(Object(U.a)({},e),{},{error:s,loading:!1});default:return e}},z={loading:!1,user:null,isAuthenticated:!1,isAdmin:!1,error:null,message:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case j:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case O:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,isAuthenticated:s.isAuthenticated,user:s.user});case b:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,user:s.user,isAuthenticated:s.isAuthenticated,error:null});case g:return Object(U.a)(Object(U.a)({},e),{},{user:s.message,isAuthenticated:!1,loading:!1,error:s.user.message});case A:return Object(U.a)(Object(U.a)({},e),{},{user:s.user,loading:!1,isAuthenticated:!1});case m:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,error:s,message:null});case h:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case p:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,message:s,error:null});case v:return Object(U.a)(Object(U.a)({},e),{},{user:null,isAuthenticated:!1,error:s});default:return e}},Q=Object(G.combineReducers)({authUser:H,blogReducer:P}),q=[M.a],K=Object(G.createStore)(Q,{},Object(J.composeWithDevTools)(G.applyMiddleware.apply(void 0,q)));r.a.render(Object(E.jsx)(l.a,{store:K,children:Object(E.jsx)(D,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.22137b99.chunk.js.map